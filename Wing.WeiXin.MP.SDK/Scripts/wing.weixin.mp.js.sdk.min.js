/*!
 * Weixin JS SDK v0.0.1
 * 用于简化微信JS初始化操纵（搭配Wing.Weixin.MP.SDK）
 */
function weixin(url) { if (typeof jQuery == "undefined") { alert("未发现JQuery") } this.isDebug = true; this.isHideOptionMenu = false; this.showOptionMenu = function () { if (this.isDebug) { return } wx.showOptionMenu() }; this.closeWindow = function () { if (this.isDebug) { return } wx.closeWindow() }; this.load = function (apiList, callback) { if (this.isDebug) { callback() } if (!$.isArray(apiList) || apiList.length == 0) { alert("API列表不能为空") } if (isHideOptionMenu) { apiList.concat(["hideOptionMenu"]) } $.getJSON((typeof url == "undefined" ? "/WeixinConfig" : url) + "?url=" + encodeURIComponent((typeof this.href != "undefined") ? this.href : location.href) + "&apiList=" + apiList.join(), function (data) { wx.config(data); wx.ready(function () { if (isHideOptionMenu) { wx.hideOptionMenu() } callback() }); wx.error(function (res) { failCallback(res) }) }) }; this.failCallback = function (r) { alert("配置注入失败，原因：" + r) } };